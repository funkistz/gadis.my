<!--
  Generated template for the MyshopPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>My Shop</ion-title>
  </ion-navbar>

  <div padding>
    <ion-segment [(ngModel)]="segment">
      <ion-segment-button value="shop">
        Shop Details
      </ion-segment-button>
      <ion-segment-button value="product">
        Products
      </ion-segment-button>
      <ion-segment-button value="order">
        Orders
      </ion-segment-button>
    </ion-segment>
  </div>

</ion-header>


<ion-content>

  <div [ngSwitch]="segment">
    <div *ngSwitchCase="'shop'">

      <ion-grid *ngIf="!shop.id">
        <ion-row padding text-center>

          <ion-spinner name="bubbles" *ngIf="!isShopLoaded && isLogin"></ion-spinner>

          <button ion-button (click)="createShop()" color="primary" block *ngIf="!shop.id && isShopLoaded && isLogin">
            <ion-icon name="star" item-end></ion-icon>
            Create shop
          </button>

        </ion-row>
      </ion-grid>

      <div relative overflow class="account-header" text-center (swipe)="onSwipeContent($event)" *ngIf="shop.id">
        <img float-left width-100 [src]="shop.shop.banner" />
        <div mark absolute top left width-100 height-100></div>
        <ion-row center padding absolute top left width-100 height-100>
          <ion-col secondary>
            <div *ngIf="isLogin">
              <div class="account-avatar" margin-auto>
                <ion-icon *ngIf="!data.user.mobiconnector_avatar" name="icon-account" [navPush]="ProfilePage"></ion-icon>
                <img *ngIf="data.user.mobiconnector_avatar" [src]="shop.shop.image" [navPush]="ProfilePage" width-100 height-100 />
              </div>
            </div>
          </ion-col>
        </ion-row>
      </div>

      <div *ngIf="shop.id">

        <ion-card-header>
          Shop Details
          <button ion-button float-right small (click)="updateImage()">change image</button>
        </ion-card-header>

        <ion-card-content>
          <ion-list>

            <form [formGroup]="formEdit" *ngIf="info">

              <ion-item mode="md" bg-transparent no-padding>
                <ion-label stacked>
                  <span dark>Store Name *</span>
                </ion-label>
                <ion-input dark type="text" formControlName="name" placeholder="Name"></ion-input>
              </ion-item>

              <ion-item mode="md" bg-transparent no-padding>
                <ion-label stacked>
                  <span dark>Store Slug *</span>
                </ion-label>
                <ion-input dark type="text" formControlName="slug" placeholder="Slug"></ion-input>
              </ion-item>

              <ion-item mode="md" bg-transparent no-padding>
                <ion-label stacked>
                  <span dark>Store Description *</span>
                </ion-label>
                <ion-textarea dark type="text" formControlName="description" placeholder="Description"></ion-textarea>
              </ion-item>

              <ion-item mode="md" bg-transparent no-padding>
                <ion-label stacked>
                  <span dark>Message to Buyers</span>
                </ion-label>
                <ion-textarea dark type="text" formControlName="message_to_buyers" placeholder="Message to Buyers"></ion-textarea>
              </ion-item>

              <ion-item mode="md" bg-transparent no-padding>
                <ion-label stacked>
                  <span dark>Phone</span>
                </ion-label>
                <ion-input dark type="text" formControlName="phone" placeholder="phone"></ion-input>
              </ion-item>

              <ion-item mode="md" bg-transparent no-padding>
                <ion-label stacked>
                  <span dark>Email *</span>
                </ion-label>
                <ion-input dark type="text" formControlName="email" readonly></ion-input>
              </ion-item>

              <h4>
                Address
              </h4>

              <ion-item mode="md" bg-transparent no-padding>
                <ion-input dark type="text" placeholder="Address Line 1" formControlName="address_1"></ion-input>
              </ion-item>

              <ion-item mode="md" bg-transparent no-padding>
                <ion-input dark type="text" placeholder="Address Line 1" formControlName="address_2"></ion-input>
              </ion-item>

              <ion-item mode="md" bg-transparent no-padding>
                <ion-input dark type="text" placeholder="Country" formControlName="country"></ion-input>
              </ion-item>

              <ion-item mode="md" bg-transparent no-padding>
                <ion-input dark type="text" placeholder="State" formControlName="state"></ion-input>
              </ion-item>

              <ion-item mode="md" bg-transparent no-padding>
                <ion-input dark type="text" placeholder="City" formControlName="city"></ion-input>
              </ion-item>

              <ion-item mode="md" bg-transparent no-padding>
                <ion-input dark type="text" placeholder="ZIP Code" formControlName="postcode"></ion-input>
              </ion-item>

              <h4>
                Social Media
              </h4>

              <ion-item no-padding>
                <ion-label>
                  <ion-icon name="logo-facebook"></ion-icon>
                  Facebook
                </ion-label>
                <ion-input type="text" formControlName="facebook"></ion-input>
              </ion-item>

              <ion-item no-padding>
                <ion-label>
                  <ion-icon name="logo-twitter"></ion-icon>
                  Twitter
                </ion-label>
                <ion-input type="text" formControlName="twitter"></ion-input>
              </ion-item>

              <ion-item no-padding>
                <ion-label>
                  <ion-icon name="logo-linkedin"></ion-icon>
                  Linkedin
                </ion-label>
                <ion-input type="text" formControlName="linkedin"></ion-input>
              </ion-item>

              <ion-item no-padding>
                <ion-label>
                  <ion-icon name="logo-googleplus"></ion-icon>
                  Google Plus
                </ion-label>
                <ion-input type="text" formControlName="google_plus"></ion-input>
              </ion-item>

              <ion-item no-padding>
                <ion-label>
                  <ion-icon name="logo-youtube"></ion-icon>
                  Youtube
                </ion-label>
                <ion-input type="text" formControlName="youtube"></ion-input>
              </ion-item>

              <ion-item no-padding>
                <ion-label>
                  <ion-icon name="logo-instagram"></ion-icon>
                  Instagram
                </ion-label>
                <ion-input type="text" formControlName="instagram"></ion-input>
              </ion-item>

              <button ion-button block margin-top (click)="updateInfo()">Save</button>

            </form>

          </ion-list>
        </ion-card-content>

      </div>

      <ion-card *ngIf="!isLogin">

        <ion-card-header>
          Please login first to setup your shop
        </ion-card-header>

        <ion-card-content>
          <button ion-item (click)="accountPage()">
            <ion-icon name="log-in" item-start></ion-icon>
            Login
          </button>
        </ion-card-content>

      </ion-card>

    </div>
    <div *ngSwitchCase="'product'">

      <ion-list>
        <ion-item *ngFor="let product of products">
          <ion-thumbnail item-start>
            <img [src]="product.modernshop_images[0].modern_square">
          </ion-thumbnail>
          <h2>{{ product.name }}</h2>
          <h3>{{ product.price }}</h3>
          <p>
            <ion-badge *ngFor="let cat of product.categories">{{ cat.name }}</ion-badge>
          </p>
        </ion-item>
      </ion-list>

    </div>
    <div *ngSwitchCase="'order'" width="100%" height="100%">

      <iframe [src]='safeURL' width="100%" height="100%" frameborder="0" class="iframe"></iframe>

    </div>
  </div>

  <ion-fab right bottom>
    <button ion-fab (click)="createProductPage()">
      <ion-icon name="add"></ion-icon>
    </button>
  </ion-fab>

</ion-content>